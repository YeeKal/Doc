---
title: backend
categories: 
tags: 
date: 2024-03-11
---

## 图片恶意访问

1. 图片防盗链

判断host 和 referer

- referer 访问来源，若为空或者与自己域名不一致，则说明是盗链
- 风险： 可以直接更改请求头信息，伪造referer

2. 动态生成url
3. 添加水印
4. 使用CDN和缓存策略
利用内容分发网络（CDN）来存储和分发图片，同时设置合理的缓存策略，减少原始图片服务器的直接访问压力。

5. 限制IP地址
如果检测到某些IP地址异常如高频率请求，可以暂时或长期封锁这些IP地址。

6. 用户验证
只有注册并登录的用户才能搜索并查看图片。这个方法会减少爬虫和非目标用户的访问。

7. 添加机器人协议文件（robots.txt）
虽然这不能阻止恶意访问，但它告诉爬虫哪些内容是可以抓取的，哪些是不可以的。
 