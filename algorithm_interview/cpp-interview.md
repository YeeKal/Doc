---
title: C++面试
categories: CAT
tags: TAG
date: 2021-05-07
---
0. 实现c++标准函数

```c++
char * myStrcpy(char *s1,const char *s2 ){
    assert(s1 !=NULL && s2!= NULL);
    while((*s1++=*s2++)!='\0');
    return s1;
}

void* myMemcpy(void *dest,const void* src,size_t n){
    assert(dest !=NULL && src!=NULL);
    char *c1=(char *)dest;
    char *c2=(char *)src;
    while(n-- >0){
        *c1++=*c2++;
    }
    return dest;
}
```

1. 重载、重写的区别

- 重载：函数名相同，函数的参数个数、参数类型或参数顺序三者中必须至少有一种不同。函数返回值的类型可以相同，也可以不相同。发生在一个类内部，不能跨作用域。

- 重定义：也叫做隐藏，子类重新定义父类中有相同名称的非虚函数 ( 参数列表可以不同 ) ，指派生类的函数屏蔽了与其同名的基类函数。可以理解成发生在继承中的重载。

- 重写：也叫做覆盖，一般发生在子类和父类继承关系之间。子类重新定义父类中有相同名称和参数的虚函数。(override)

2.  封装/继承/多态

- 封装：把数据和函数等集合放在类中
- 继承：子类通过继承父类实现资源共用
- 多态

3. 内存泄漏

- 是什么：动态分配的内存在使用完毕后没有及时释放

4. 内存：

- 栈：编译器自动分配管理，存放临时变量和函数参数（局部变量），函数执行结束自动释放
- 堆：由程序员手动分配
- 全局静态存储区：全局变量和静态变量
- 常量存储区：存放常量

5. NULL和nullptr的区别

```c++
// in C
#define NULL ((void *)0) // c中是空指针


// in C++
#ifdef __cplusplus 
#define NULL 0  // c++ 中NULL就是0，因为C++不支持void *类型的空指针隐式转换为其他类型指针
#else
#define NULL ((void *)0)
#endif

// 因此在C++中NULL可能在指针与int类型之间产生二义性
// 索引C++中引入nullptr

const class nullptr_t
{
public:
    template<class T>
    inline operator T*() const
        { return 0; }

    template<class C, class T>
    inline operator T C::*() const
        { return 0; }
 
private:
    void operator&() const;
} nullptr = {};
```

## 进程和线程的区别

根本区别：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位

在开销方面：每个进程都有独立的代码和数据空间（程序上下文），程序之间的切换会有较大的开销；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），线程之间切换的开销小。

所处环境：在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）

内存分配方面：系统在运行的时候会为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源。

包含关系：没有线程的进程可以看做是单线程的，如果一个进程内有多个线程，则执行过程不是一条线的，而是多条线（线程）共同完成的；线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程。

## 进程间通信的方式

1. 匿名管道
    - 半双工
    - 只能在亲缘关系的进程间通信
    - 可以看成是一种特殊的文件，对于它的读写也可以使用普通的read、write 等函数。但是它不是普通的文件，并不属于其他任何文件系统，并且只存在于内存中
2. FIFO(命名管道)
    - 可以在无关的进程之间交换数据
    - 有路径名与之相关联，以一种特殊设备文件形式存在于文件系统中
3. 消息队列
    - 是消息的链接表，存放在内核中。一个消息队列由一个标识符（即队列ID）来标识
    - 消息队列是面向记录的，其中的消息具有特定的格式以及特定的优先级
    - 消息队列独立于发送与接收进程。进程终止时，消息队列及其内容并不会被删除
    - 消息队列可以实现消息的随机查询,消息不一定要以先进先出的次序读取,也可以按消息的类型读取。
4. 信号量
    - 不能传递复杂消息，只能用来同步    
5. 共享内存
    - 是最快的一种 IPC，因为进程是直接对内存进行存取
    - 因为多个进程可以同时操作，所以需要进行同步
    - 信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问。



## ref

- [C++知识点](https://github.com/huihut/interview)
- [C++常见面试问题汇总-无答案](https://github.com/Making-It/CS_Review/blob/master/%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/C%2B%2B%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.md)
- [awesome-cs-books: 超过 200 本经典的计算机书籍分享](https://github.com/imarvinle/awesome-cs-books)